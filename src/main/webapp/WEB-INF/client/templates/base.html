<html>
<head>
  <title>{% block title %} {% endblock %}</title>

  <link rel="stylesheet" type="text/css" href="/static/css/lib/bootstrap.min.css">
  <!--link rel="stylesheet" type="text/css" href="/static/css/lib/select2.css"-->
  <link rel="stylesheet" type="text/css" href="/static/css/app.css">
  <link rel="stylesheet" type="text/css" href="/static/css/lib/jquery.contextMenu.min.css">
  <link rel="stylesheet" type="text/css" href="/static/css/lib/jquery.contextMenu.min.css.map">

  <link rel="stylesheet" type="text/css" href="/static/css/lib/jquery-ui.css">
  <link rel="stylesheet" type="text/css" href="/static/css/lib/jquery-ui.min.css">
  <link rel="stylesheet" type="text/css" href="/static/css/lib/jquery-ui.structure.css">
  <link rel="stylesheet" type="text/css" href="/static/css/lib/jquery-ui.structure.min.css">
  <link rel="stylesheet" type="text/css" href="/static/css/lib/jquery-ui.theme.css">
  <link rel="stylesheet" type="text/css" href="/static/css/lib/jquery-ui.theme.min.css">


  <link rel="stylesheet" type="text/css" href="/static/css/lib/jstree/themes/default/style.min.css">

  <script src="/static/js/lib/jquery-2.1.1.min.js"></script>
  <script src="/static/js/lib/jquery-ui.min.js"></script>
  <script src="/static/js/lib/bootstrap.min.js"></script>
  <script src="/static/js/lib/knockout-3.2.0.js"></script>
  <script src="/static/js/lib/knockout-custom-bindings.js"></script>
  <!--script src="/static/js/lib/modernizr.custom.js"></script-->
  <!--script src="/static/js/lib/select2.min.js"></script-->
  <script src="/static/js/lib/context-menu/jquery.contextMenu.min.js"></script>
  <script src="/static/js/lib/context-menu/jquery.ui.position.min.js"></script>
  <script src="/static/js/lib/mousetrap.min.js"></script>
  <script src="/static/js/lib/Base.js"></script>
  <script src="/static/js/app/utils.js?"></script>
  <script src="/static/js/app/core.js?"></script>
  <script src="/static/js/app/models.js"></script>

</head>
<body>
<header>
  <div class="row" id="navigation">
    <div id="brand" class="col-md-2">
      <h4>
        <a href="/">{{ Config["app.name"] }}</a>
      </h4>
    </div>
    <div class="col-md-5">
      <div id="menulist">
        <div class="row">
          <div class="col-md-3">
            <div class="btn-group">
              <a href="#" data-toggle="dropdown">
                Import <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a href="#"
                     data-bind="click: function(){getDirectoryNames(null)}"
                     data-toggle="modal" data-target="#selectImportDirectory">From folder</a>
                </li>

                <li role="separator" class="divider"></li>
                <li><a href="#">Upload</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md-3">
            <a href="#">Settings</a>
          </div>
        </div>
      </div>
    </div>
    <div id="screenTitle" class="col-md-2">
      <h5>
        {% block title %} {% endblock %}
      </h5>
    </div>
    <div class="col-md-3">
      <form id="search" method="GET" action="/client/search">
        <input type="text" name="${C.Api.Search.QUERY_TEXT}" class="form-control" placeholder="Search..." maxlength="200">
      </form>
    </div>
  </div>
  <div id="hud">
    <div id="successMessage" class="alert alert-success" style="display: none" role="alert" data-bind="text: successMessage">
    </div>
    <div id="infoMessage" class="alert alert-info" style="display: none" role="alert" data-bind="text: infoMessage">
    </div>
    <div id="warningMessage" class="alert alert-warning" style="display: none" role="alert" data-bind="text: warningMessage">
    </div>
  </div>
</header>

<div id="content" class="container-fluid">
  <div id="errorContainer" class="alert alert-danger alert-dismissible fade in" role="alert" style="display: none">
    <button type="button" class="close" aria-label=Close data-bind="click: dismissError"><span aria-hidden=true>&times;</span></button>
    <h4 data-bind="visible: errorMessage">
      Error. <span data-bind="text: errorMessage, visible: errorMessage"></span>
    </h4>
    <div data-bind="visible: errorStacktrace" style="margin-top: 2em">
      <p>
        <button type="button" class="btn btn-info" data-bind="click: reportError">Send anonymous error report (pretty please?)</button>
        <button type="button" class="btn btn-default" data-bind="click: dismissError">Dismiss</button>
      </p>
      <h4 style="margin-top: 2em">Detail</h4>
      <p data-bind="text: errorStacktrace"></p>
    </div>
  </div>

  {% block body %}
  {% endblock %}
</div>

<footer></footer>

<!-- MODALS -->

<!-- Directory browser modal -->
<div class="modal fade" id="selectImportDirectory" tabindex="-1" role="dialog" aria-labelledby="selectImportDirectoryLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form>
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="selectImportDirectoryModalLabel">Select location to import from</h4>
        </div>
        <div class="modal-body">
          <!-- back button -->
          <button type="button" class="btn btn-sm btn-default go-back" data-bind="click: gotoPreviousDirectory">
            <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
            Back
          </button>

          <div>
            <span data-bind="text: currentPath"></span>
          </div>

          <select id="directoryList" size="20" data-bind="foreach: directoryNames" name="selectedDirectory" multiple="no" >
            <option data-bind="attr: {'value': $data}, text: $data, event : { dblclick: $parent.dropIntoDirectory($data) }"></option>
          </select>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-bind="click: selectImportDirectory">Select</button>
        </div>
      </form>
    </div>
  </div>
</div>



{% block assets %}
{% endblock %}
</body>
</html>
