{% extends "./base.html" %}

{% block title %} Import {% endblock %}

{% block assets %}
<script src="/static/js/lib/jquery-atmosphere.js" xmlns="http://www.w3.org/1999/html"></script>
<script src="/static/js/app/import.js"></script>
{% endblock%}

{% block body %}
<div id="importControls">
  <div class="container-fluid">

    <div class="row">
      <div class="col-md-12" id="readyToImport" style="display: none" data-bind="visible: importMode() == $root.IMPORT_MODE.DIRECTORY && isImporting() == false">
        <div class="panel panel-success">
          <div class="panel-heading">
            <h3 class="panel-title">Ready to import</h3>
          </div>
          <div class="panel-body">
          <strong>Source:</strong>&nbsp;<span data-bind="text: importDirectoryPath()"></span>
          </div>
        </div>
      </div>
    </div>


    <div class="row">
      <div class="col-md-12">
        <div class="progress" style="display: none" data-bind="visible: isImporting() && assetsProcessedCnt() > 0">
          <div data-bind="attr: {'aria-valuenow': percentComplete}, style: {width: percentComplete() + '%'}"
               class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100">
            <h4><span data-bind="html: '&nbsp;&nbsp;' + assetsProcessedCnt() + '/' + totalAssetsCnt()"></span></h4>
          </div>
        </div>
        <div class="col-md-12" id="collectingInfo" style="display: none" data-bind="visible: isImporting() && assetsProcessedCnt() == 0">
          Collecting asset info...
        </div>
      </div>
    </div>
    <!-- Import profiles
    <div class="row well" id="importProfiles" style="display: none" data-bind="visible: importMode() && !isImporting()">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12" style="text-align: center">
                    <h3>Import Profile
                        <button type="button"
                                class="btn btn-default"
                                data-bind="click: function(){resetFormErrors('#createImportProfile'); hide('#createImportProfileError');}"
                                data-toggle="modal"
                                data-target="#createImportProfile">Create New</button></h3>
                </div>
            </div>

            <div class="row"  data-bind="visible: importProfiles().length > 0">
                <div class="col-md-12">
                    <select size="10" data-bind="foreach: importProfiles" name="${C.Api.ImportProfile.IMPORT_PROFILES}">
                        <option data-bind="attr: {'value': $data.id}, text: $data.name"></option>
                    </select>
                </div>
            </div>
        </div>
    </div>-->


    <div class="row">
      <div class="col-md-12" data-bind="visible: importMode()">
        <div id="startStop" class="pull-right">
          <button id="start" style="display: none" type="button" data-bind="visible: !isImporting(), click: importAssets" class="btn btn-success">Start Import</button>
          <button id="stop" style="display: none" type="button" data-bind=" visible: isImporting(), click: cancelImport" class="btn btn-danger">
            <span data-bind="if: !isStopping()">STOP</span>
            <span data-bind="if: isStopping()">HALTING ...</span>
          </button>
        </div>
      </div>
    </div>

    <div id="importStatus">
      <div class="row">
        <div class="col-md-12">
          <!-- Nav tabs -->
          <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active"><a href="#importedAssets" aria-controls="imported" role="tab" data-toggle="tab" data-bind="text: 'Imported (' + statsImported() + ')'"></a></li>
            <li role="presentation"><a href="#warnings" aria-controls="warnings" role="tab" data-toggle="tab" data-bind="text: 'Warnings (' + statsWarnings() + ')'"></a></li>
            <li role="presentation"><a href="#errors" aria-controls="errors" role="tab" data-toggle="tab" data-bind="text: 'Errors (' + statsErrors() + ')'"></a></li>
          </ul>
        </div>

        <!-- Tab panes -->
        <div class="tab-content">
          <div role="tabpanel" class="tab-pane active" id="importedAssets"></div>
          <div role="tabpanel" class="tab-pane" id="warnings"></div>
          <div role="tabpanel" class="tab-pane" id="errors"></div>
        </div>
      </div>
    </div>
  </div>
</div>



<!-- MODALS -->

<!-- Import profile modal -->
<!-- div class="modal fade" id="createImportProfile" tabindex="-1" role="dialog" aria-labelledby="createImportProfileLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form>
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="createImportProfileLabel">Create a New Import Profile</h4>
                </div>
                <div class="modal-body">
                    <div id="createImportProfileError" class="alert alert-danger" role="alert"></div>
                    <div id="createImportProfileForm" class="form-horizontal">
                        <div class="form-group">
                            <label for="${C.Api.ImportProfile.NAME}" class="control-label"></label>
                            <div class="col-md-12">
                                <input type="text" class="form-control" name="${C.Api.ImportProfile.NAME}" placeholder="Profile name">
                            </div>
                            <div class="error"></div>
                        </div>
                        <div class="form-group">
                            <label for="${C.Api.ImportProfile.KEYWORDS}" class="control-label"></label>
                            <div class="col-md-12">
                                <input type="text" class="form-control" name="${C.Api.ImportProfile.KEYWORDS}" placeholder="keyword keyword, keyword">
                            </div>
                            <div class="error"></div>
                         </div>

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" data-bind="click: createImportProfile">Create</button>
                </div>
            </form>
        </div>
    </div>
</div> -->


<script>
  $(document).ready(function() {
    var importViewModel = new ImportViewModel();
    ko.applyBindings(importViewModel);
  });
</script>
{% endblock%}

{% block footer %}
{% endblock%}
